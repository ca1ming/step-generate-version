box: python
build:
	steps:
		- validate-wercker-step
		- script:
        name: install envdir
        code: |
          sudo pip install envdir

    - script:
        name: scenario 1: service down
        code: |
          envdir envs/case1 test/case1.sh
    - script:
        name: clone and start server.
        code: |
          git clone https://github.com/flenter/versioning_service.git
          cd versioning_service
          python -m virtualenv --distirbute venv
          source venv/bin/activate
          pip install -r requirements.txt
          cp $WERCKER_SOURCE_DIR/test/fixture.json inital_data.json
          ./manage.py syncdb
          ./manage.py run_gunicorn -D

    - script: